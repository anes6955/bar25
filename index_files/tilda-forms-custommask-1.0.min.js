function t_customMask__caret(e,t,n){var a;if(!e||"none"===e.style.display)return null;var r=t,i=n;return"number"==typeof r?(i="number"==typeof i?i:r,e.setSelectionRange?e.setSelectionRange(r,i):e.createTextRange&&((a=e.createTextRange()).collapse(!0),a.moveEnd("character",i),a.moveStart("character",r),a.select()),e):(e.setSelectionRange?(r=e.selectionStart,i=e.selectionEnd):document.selection&&document.selection.createRange&&(i=(r=0-(a=document.selection.createRange()).duplicate().moveStart("character",-1e5))+a.text.length),{begin:r,end:i})}function t_customMask__unmask(e){return t_triggerEvent(e,"unmask")}function t_customMask__mask(e,t,n){var a,r=[],i,o,u=null,s,c,l;if(!t&&e){var d=window.tildaCustomMaskSetting.defaultSetting.dataName;return d?d():null}var v=Object.assign({},{autoclear:window.tildaCustomMaskSetting.defaultSetting.autoclear,placeholder:window.tildaCustomMaskSetting.defaultSetting.placeholder,completed:null},n),f;a=window.tildaCustomMaskSetting.defaultSetting.definitions,o=t.length,c=t.length,i=String(t).split("");for(var m=0;m<i.length;m++){var g=i[m];"?"===g?(c--,o=m):a[g]?(r.push(new RegExp(a[g])),null===u&&(u=r.length-1),m<o&&(s=r.length-1)):r.push(null)}for(var _=[],h=0;h<i.length;h++){var p=i[h];"?"!==p&&(a[p]?_.push(E(h)):_.push(p))}var k=_.join(""),w=e.value;function E(e){return e<v.placeholder.length?v.placeholder.charAt(e):v.placeholder.charAt(0)}function b(){if(v.completed){for(var t=u;t<=s;t++)if(r[t]&&_[t]===E(t))return;v.completed=e}}function M(e){for(var t=e;++t<c&&!r[t];);return t}function S(e){for(var t=e;--t>=0&&!r[t];);return t}function y(t,n){var a=M(n);if(!(t<0)){for(var i=t;i<c;i++)if(r[i]){if(!(a<c&&r[i].test(_[a])))break;_[i]=_[a],_[a]=E(a),a=M(a)}A(),t_customMask__caret(e,Math.max(u,t))}}function L(e){for(var t=E(e),n,a,i=e;i<c;i++)if(r[i]){if(n=M(i),a=_[i],_[i]=t,!(n<c&&r[n].test(a)))break;t=a}}function C(){var t=e.value,n=t_customMask__caret(e),a=function t(){t_customMask__caret(e,n.begin,n.begin)};if(l&&l.length&&l.length>t.length){for(var i=R(!0),o=n.end;o>0&&!r[o-1];)o--;0===o&&(o=i),n.begin=o,setTimeout((function(){a(),b()}),0)}else n.begin=R(!0),setTimeout((function(){a(),b()}),0);l=e.value}function O(){R(),e.value!=w&&(e.change&&e.change(),e.dispatchEvent(new Event("change",{bubbles:!0}))),!e.value&&e.classList.contains("t-input_has-content")&&e.classList.remove("t-input_has-content")}function T(t){if(!e.readOnly){var n=t||window.event,a=n.keyCode||n.which,r,i,o;l=e.value,8===a||46===a||window.tildaCustomMaskSetting.iPhone&&127===a?(i=(r=t_customMask__caret(e)).begin,(o=r.end)-i==0&&(i=46!==a?S(i):o=M(i-1),o=46===a?M(o):o),x(i,o),y(i,o-1),t.preventDefault?t.preventDefault():t.returnValue=!1):13===a?O():27===a&&(e.value=w,t_customMask__caret(e,0,R()),t.preventDefault?t.preventDefault():t.returnValue=!1)}}function j(t){if(!e.readOnly){var n=t||window.event,a=n.keyCode||n.which,i=t_customMask__caret(e),o,u,l;if(!(17===a||18===a||91===a||93===a||a<32)&&a&&13!==a){if(i.end-i.begin!=0&&(x(i.begin,i.end),y(i.begin,i.end-1)),(o=M(i.begin-1))<c&&(u=String.fromCharCode(a),r[o].test(u))){var d;if(L(o),_[o]=u,A(),l=M(o),window.tildaCustomMaskSetting.android)setTimeout((function t(){t_customMask__caret(e,l)}),0);else t_customMask__caret(e,l);i.begin<=s&&b()}t.preventDefault?t.preventDefault():t.returnValue=!1}}}function x(e,t){for(var n=e;n<t&&n<c;n++)r[n]&&(_[n]=E(n))}function A(){e.value=_.join("")}function R(t){var n=e.value,a=-1,i=0,s,l;for(l=0;l<c;l++)if(r[l]){for(_[l]=E(l);i++<n.length;)if(s=n.charAt(i-1),r[l].test(s)){_[l]=s,a=l;break}if(i>n.length){x(l+1,c);break}}else _[l]===n.charAt(i)&&i++,l<o&&(a=l);return t?A():a+1<o?v.autoclear||_.join("")===k?(e.value&&(e.value=""),x(0,c)):A():(A(),e.value=e.value.substring(0,a+1)),o?l:u}var D="focus",I="blur";function N(){if(!e.readOnly){clearTimeout(window.tildaCustomMaskSetting.caretTimeoutId),w=e.value;var n=R();window.tildaCustomMaskSetting.caretTimeoutId=setTimeout((function(){A(),n==t.replace("?","").length?t_customMask__caret(e,0,n):setTimeout((function(){t_customMask__caret(e,n)}),50)}),10)}}function P(){if(!e.readOnly){if(0===e.getAttribute("data-tilda-mask").indexOf("+7")){var t=e.value.replace(/\D/g,"");0===t.indexOf("78")&&(e.value=t.substring(2)),0!==t.indexOf("8")&&0!==t.indexOf("7")||(e.value=t.substring(1))}setTimeout((function(){var t=R(!0);t_customMask__caret(e,t),b()}),0)}}function V(){for(var e=document.querySelectorAll(".js-tilda-mask"),t=0;t<e.length;t++){var n=e[t];t_removeEventListener(n,D,N),t_removeEventListener(n,I,O),t_removeEventListener(n,"keydown",T),t_removeEventListener(n,"keypress",j),t_removeEventListener(n,"input",P),t_removeEventListener(n,"paste",P),t_removeEventListener(n,"unmask",V)}}return document.addEventListener||(D="focusin",I="focusout"),t_addEventListener(e,D,N),t_addEventListener(e,I,O),t_addEventListener(e,"paste",P),t_addEventListener(e,"unmask",V,{once:!0}),window.tildaCustomMaskSetting.chrome&&window.tildaCustomMaskSetting.android?(t_removeEventListener(e,"input",C),t_addEventListener(e,"input",C)):(t_addEventListener(e,"input",P),t_addEventListener(e,"keydown",T),t_addEventListener(e,"keypress",j)),R(),null}function t_triggerEvent(e,t){var n;document.createEvent?(n=document.createEvent("HTMLEvents")).initEvent(t,!0,!1):document.createEventObject&&((n=document.createEventObject()).eventType=t),n.eventName=t,e.dispatchEvent?e.dispatchEvent(n):e.fireEvent?e.fireEvent("on"+n.eventType,n):e[t]?e[t]():e["on"+t]&&e["on"+t]()}"function"!=typeof Object.assign&&(Object.assign=function(e){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var a=arguments[n];if(null!=a)for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t}),function(){var e=navigator.userAgent;window.tildaCustomMaskSetting={iPhone:/iphone/i.test(e),chrome:/chrome/i.test(e),android:/android/i.test(e),caretTimeoutId:0,defaultSetting:{definitions:{9:"[0-9]",a:"[A-Za-z]","а":"[А-Яа-яЁё]","*":"[A-Za-zА-Яа-яЁё0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"}}}();
